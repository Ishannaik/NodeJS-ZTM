while(!shouldExit){
    processEvents();
    // execute all the time-consuming tasks
}